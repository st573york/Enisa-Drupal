id: audit_migration
label: 'Audit Migration'
migration_group: audit_migration_group

source:
  plugin: audit_sql
  key: enisa

process:
  id: id
  user_id:
    plugin: user_lookup
    source: email
  ip_address: ip_address
  user_agent: user_agent
  action: event
  description: description
  affected_entity: auditable_name
  old_values: old_values
  new_values: new_values
  timestamp: 
    plugin: callback
    callable: strtotime
    source: created_at

destination:
  plugin: table
  table_name: audits
  id_fields:
    id:
      type: integer

migration_dependencies:
  required:
    - user_migration
